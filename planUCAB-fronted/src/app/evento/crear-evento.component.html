<div class="modal-overlay" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Crear Evento</h2>
      <button type="button" class="modal-close" (click)="cerrarModal()">×</button>
    </div>
    <form [formGroup]="form" (ngSubmit)="submit()" class="modal-form">
  <label>
    Usuario ID
    <input type="number" formControlName="userId" />
  </label>

  <label>
    Nombre
    <input type="text" formControlName="name" />
    <small *ngIf="form.get('name')?.touched && form.get('name')?.hasError('required')" style="color:#d32f2f">El título es requerido</small>
  </label>

  <label>
    Ubicación
    <input type="text" formControlName="location" />
  </label>

  <label>
    Fecha
    <app-date-picker [value]="form.get('date')?.value || ''" (valueChange)="form.patchValue({date: $event})"></app-date-picker>
    <small *ngIf="form.get('date')?.touched && form.get('date')?.hasError('required')" style="color:#d32f2f">La fecha es requerida</small>
  </label>

  <label>
    Hora
    <div class="actions" style="gap:12px">
      <div style="flex:1">
        <div style="font-size:12px; font-weight:600; margin-bottom:4px">Inicio</div>
        <app-time-picker [value]="form.get('startTime')?.value || ''" (valueChange)="form.patchValue({startTime: $event})"></app-time-picker>
        <small *ngIf="form.get('startTime')?.touched && form.get('startTime')?.hasError('required')" style="color:#d32f2f; font-size:11px">La hora de inicio es requerida</small>
      </div>
      <div style="flex:1">
        <div style="font-size:12px; font-weight:600; margin-bottom:4px">Fin</div>
        <app-time-picker [value]="form.get('endTime')?.value || ''" (valueChange)="form.patchValue({endTime: $event})"></app-time-picker>
        <small *ngIf="form.get('endTime')?.touched && form.get('endTime')?.hasError('required')" style="color:#d32f2f; font-size:11px">La hora de fin es requerida</small>
      </div>
    </div>
  </label>

  <label>
    Descripción
    <textarea formControlName="description" rows="3"></textarea>
  </label>

  <label>
    Color
    <input type="color" formControlName="colorHex" />
  </label>

  <div style="display:flex; gap:8px">
    <button type="button" (click)="cancelar()">Cancelar</button>
    <button type="submit">Crear evento</button>
  </div>
      <div class="mensaje" [style.color]="mensaje.startsWith('Error') ? '#d32f2f' : '#333'">{{ mensaje }}</div>
    </form>
  </div>
</div>


