<div class="notas-container">
  <div class="notas-header">
    <button (click)="volver()" class="notas-back-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Volver
    </button>
    <h1>Notas por Materia</h1>
  </div>

  <div class="notas-content" *ngIf="notasPorMateria().length > 0; else sinEvaluaciones">
    <div *ngFor="let notaMateria of notasPorMateria()" class="materia-card">
      <div class="materia-header">
        <h2>{{ notaMateria.materia.nombre }}</h2>
      </div>
      
      <div class="evaluaciones-list">
        <div *ngFor="let evaluacion of notaMateria.evaluaciones" class="evaluacion-item">
          <div class="evaluacion-titulo">
            <strong>{{ evaluacion.titulo }}</strong>
            <span class="evaluacion-porcentaje">({{ formatearNumero(evaluacion.porcentaje) }}%)</span>
          </div>
          <div class="evaluacion-detalle">
            <div class="detalle-linea">
              <span class="detalle-label">Nota obtenida:</span>
              <span class="detalle-value">{{ formatearNumero(evaluacion.nota) }}/20</span>
            </div>
            <div class="detalle-linea">
              <span class="detalle-label">Nota ponderada:</span>
              <span class="detalle-value">{{ formatearNumero(calcularNotaPonderada(evaluacion)) }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="materia-total">
        <div class="total-linea">
          <span class="total-label">Total:</span>
          <span class="total-value">{{ formatearNumero(notaMateria.total) }}</span>
        </div>
        <div class="estado-linea" [class.estado-aprobado]="notaMateria.aprobado" [class.estado-reprobado]="!notaMateria.aprobado">
          <span>{{ notaMateria.aprobado ? 'Aprobado' : 'Reprobado' }}</span>
        </div>
      </div>
    </div>
  </div>

  <ng-template #sinEvaluaciones>
    <div class="sin-evaluaciones">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
      <p>No hay evaluaciones registradas</p>
    </div>
  </ng-template>
</div>

